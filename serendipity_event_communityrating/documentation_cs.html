<html>
    <head>
		<meta http-equiv="content-type" content="text/html; charset=windows-1250">
		<meta name="generator" content="PSPad editor, www.pspad.com">
        <title>Dokumentace: Hodnocení (Community rating)</title>
    </head>

	<style>
		code {
			display: block;
			background-color: #cccccc;
			border: solid 1px #666666;
			margin: 5px;
			padding: 5px;
		}
	</style>
<body>
    
<h1>Dokumentace k pluginu 'Hodnocení'</h1>

<p>Dokumentaci k tomuto pluginu pøeložil do èeštiny Vladimír Ajgl (vlada [zavinac] ajgl [tecka] cz) dne 19.6.2010. Od té doby mohl být plugin pozmìnìn nebo mohly být rozšíøené jeho funkce. Zkontrolujte pro jistotu i <a href="Readme">aktuální anglické "readme"</a> a <a href="ChangeLog">ChangeLog</a>.
<p>

<p>
Tento plugin ve své podstatì pouze poskytuje API - programátorské rozhraní, neboli soubor funkcí, které mùžete používat v šablonách Smarty.
</p>

<h2>Pøíprava souborù</h2>
<p>
Budete potøebovat obrázky se symboly hodnocení (hvìzdièky, medaile, ...). Ty jsou souèástí pluginu, nacházejí se v podadresáøi "img/".
<p>
Zkopírujte tyto soubory do podadresáøe "img" ve vaší aktuální šablonì/stylu vzhledu!

<h2>Backend</h2>
<p>
Tento plugin umožòuje vytvoøit hodnotící stupnici pro jakoukoliv položku si usmyslíte. V následujícím pøíkladu budeme hodnotit filmy na základì IMDB odkazù a ID èísla pro každý hodnocený film.
<p>
Poté co nainstalujete plugin, jdìte do Administraèní sekce a vytvoøte nový pøíspìvek. Podívejte se na konec stránky, tam najdete odstavec "Hodnocení" (Community Rating).

<p>
Tady naleznete rozbalovací panel, kam mùžete pøidávat hodnocené vìci ("IMDB", "Výrobek", ...) a zadat hodnocení. Pro jeden pøíspìvek mùžete zadat více typù a hodnocení.
<p>
Hodnocení, která jste takto zadali, jsou Vaše osobní hodnocení a jsou uložena databázové tabulce serendipity_entryproperties.
<p>
Teï když jsme zadali hodnocení, urèitì ho potøebujeme zobrazit a ukázat návštìvníkùm stránek. K tomu musíme zmìnit šablony.

<h2>entries.tpl</h2>
<p>
Používání funkcí API rozhraní má smysl pouze v šablonì entries.tpl.
<p>
Odrolujte nakonec a prohlédnìte si HTML kód. Nejdøíve si musíte rozmyslet, kde se má hodnocení zobrazovat.
<p>
Dobré místo je tøeba následující úsek kódu:

<code>
            &lt;div class="serendipity_entry_extended"&gt;&lt;a id="extended"&gt;&lt;/a&gt;{$entry.extended}
</code>

<p>
Tento øádek je zodpovìdný za zobrazení rozšíøené textové èásti pøíspìvku. Zobrazovat hodnocení hned pod ním zní jako dobrý nápad.
<p>
Aby se zobrazovalo hodnocení filmu, vložte do kódu následující tag:

<code>
{communityrating_show data=$entry.properties type="IMDB"}
</code>
Tato funkce vloží požadovaná data o hlasování ("data") do šablony ("IMDB") a zobrazí na stránce Vaše hodnocení.
<p>
Také mùžete zobrazovat hodnocení jiných lidí, kteøí používají tento plugin. Udìláte to následovnì:

<code>
{communityrating_show data=$entry.properties type="IMDB" who="garvin" url="http://www.blog_kamarada.cz/index.php?/plugin/communityrating"}
</code>

Pomocí parametrù "who" a "url" mùžete zadat adresu blogu kamaráda. Mùžete pøirozenìì pøidat libovolný poèet volání funkce {communityrating_show}.

<h2>Šablony pro hodnocení</h2>
<p>
Pro zobrazení hodnocení mùžete použít pro každý typ hodnocené vìci (IMDB, Výrobek, ...) a pro každého kamaráda jinou šablonu. Tedy že každá kombinace mùže vypadat jinak.
<p>
Jako výchozí je použita šablona, která zobrazuje hvìzdièky jako indikátor hodnocení.
<p>
Šablony jsou pojmenovaní jako "communityrating_IMDB.tpl" nebo "communityrating_IMDB_garvin.tpl". První èást oznaèuje typ vìci ("_IMDB"). Druhá èást názvu ("", "_garvin") je jméno kamaráda, od kterého zobrazujeme hodnocení. Takže si mùžete hodnocení tak, že se pro každého cizího hodnotitele bude zobrazovat odlišnì!

<h2>RSS Kanály</h2>

<p>
Informaci o hodnocení mùžete také pøidat do RSS kanálu. Použijte stejnou funkci API rozhraní v šablonì RSS kanálu, jmenuje se feed_*.tpl. A nezapomeòte pøipojit parametr "escaped='true'" podle následujícího pøíkladu:

<code>
{communityrating_show data=$entry.properties type="IMDB" escaped="true"}
</code>

<h2>Postup pøidání nového typu vìci</h2>
<ol>
<li>Nastavte plugin "Hlasování". Upravte políèko, které obsahuje seznam aktuálnì použitých typù. Pøidejte svùj vlastní typ na konec. Oddìlovaèem je èárka ",". Zadávejte názvy bez diakritiky a speciálních znakù.</li>
<li>Zkopírujte obrázky img/stars_XXX_(full|half|zero).png tak, abyste mohli vytvoøit obrázky pro Váš nový typ. Pokud pøidáte nový typ "auta", musí se obrázky jmenovat "stars_auta_full.png", "stars_auta_half.png", "stars_auta_zero.png".
</li>
<li>Vytvoøte nový soubor šablony "communityrating_auta.tpl"</li> buï v adresáøi pluginu, nebo v adresáøi Vaší aktuální šablony/stylu vzhledu. Upravte šablonu podle potøeby.
<li>Upravte šablonu "entries.tpl". Vložte do ní následující øádek:
<code>
{communityrating_show data=$entry.properties type="auta"}
</code>
</li>
</ol>

<h2>Postup pøidání nového kamaráda</h2>
<ol>
<li>Nejprve se pøesvìdète, že kamarád nainstaloval plugin do svého blogu serendipity. Také se pøedpokládá, že znáte URL adreu kamarádova blogu.</li>
<li>Pøidejte nové soubory šablon. Øeknìme, že chcete zobrazovat, jak kamarád "garvin" hodnotil filmy podle IMDB. Pak budete potøebovat vytvoøit soubor "communityrating_IMDB_garvin.tpl".
</li>
<li>Upravte šablonu "entries.tpl". Vložte do ní následující øádek:
<code>
{communityrating_show who="garvin" url="http://garvin/index.php?/plugin/communityrating" data=$entry.properties type="auta"}
</code>
</li>
</ol>

<h2>CHANGE_LOG (HISTORIE VERZÍ)</h2>
<ul>
<li>Nejnovìjší: Dopøedná kompatibilita se smarty3</li>
</ul>

</body>        
</html>
