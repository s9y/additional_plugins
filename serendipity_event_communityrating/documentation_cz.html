<html>
    <head>
		<meta http-equiv="content-type" content="text/html; charset=iso-8859-2">
		<meta name="generator" content="PSPad editor, www.pspad.com">
        <title>Dokumentace: Hodnocení (Community rating)</title>
    </head>

	<style>
		code {
			display: block;
			background-color: #cccccc;
			border: solid 1px #666666;
			margin: 5px;
			padding: 5px;
		}
	</style>
<body>
    
<h1>Dokumentace k pluginu 'Hodnocení'</h1>

<p>Dokumentaci k tomuto pluginu pøelo¾il do èe¹tiny Vladimír Ajgl (vlada [zavinac] ajgl [tecka] cz) dne 19.6.2010. Od té doby mohl být plugin pozmìnìn nebo mohly být roz¹íøené jeho funkce. Zkontrolujte pro jistotu i <a href="Readme">aktuální anglické "readme"</a> a <a href="ChangeLog">ChangeLog</a>.
<p>

<p>
Tento plugin ve své podstatì pouze poskytuje API - programátorské rozhraní, neboli soubor funkcí, které mù¾ete pou¾ívat v ¹ablonách Smarty.
</p>

<h2>Pøíprava souborù</h2>
<p>
Budete potøebovat obrázky se symboly hodnocení (hvìzdièky, medaile, ...). Ty jsou souèástí pluginu, nacházejí se v podadresáøi "img/".
<p>
Zkopírujte tyto soubory do podadresáøe "img" ve va¹í aktuální ¹ablonì/stylu vzhledu!

<h2>Backend</h2>
<p>
Tento plugin umo¾òuje vytvoøit hodnotící stupnici pro jakoukoliv polo¾ku si usmyslíte. V následujícím pøíkladu budeme hodnotit filmy na základì IMDB odkazù a ID èísla pro ka¾dý hodnocený film.
<p>
Poté co nainstalujete plugin, jdìte do Administraèní sekce a vytvoøte nový pøíspìvek. Podívejte se na konec stránky, tam najdete odstavec "Hodnocení" (Community Rating).

<p>
Tady naleznete rozbalovací panel, kam mù¾ete pøidávat hodnocené vìci ("IMDB", "Výrobek", ...) a zadat hodnocení. Pro jeden pøíspìvek mù¾ete zadat více typù a hodnocení.
<p>
Hodnocení, která jste takto zadali, jsou Va¹e osobní hodnocení a jsou ulo¾ena databázové tabulce serendipity_entryproperties.
<p>
Teï kdy¾ jsme zadali hodnocení, urèitì ho potøebujeme zobrazit a ukázat náv¹tìvníkùm stránek. K tomu musíme zmìnit ¹ablony.

<h2>entries.tpl</h2>
<p>
Pou¾ívání funkcí API rozhraní má smysl pouze v ¹ablonì entries.tpl.
<p>
Odrolujte nakonec a prohlédnìte si HTML kód. Nejdøíve si musíte rozmyslet, kde se má hodnocení zobrazovat.
<p>
Dobré místo je tøeba následující úsek kódu:

<code>
            &lt;div class="serendipity_entry_extended"&gt;&lt;a id="extended"&gt;&lt;/a&gt;{$entry.extended}
</code>

<p>
Tento øádek je zodpovìdný za zobrazení roz¹íøené textové èásti pøíspìvku. Zobrazovat hodnocení hned pod ním zní jako dobrý nápad.
<p>
Aby se zobrazovalo hodnocení filmu, vlo¾te do kódu následující tag:

<code>
{communityrating_show data=$entry.properties type="IMDB"}
</code>
Tato funkce vlo¾í po¾adovaná data o hlasování ("data") do ¹ablony ("IMDB") a zobrazí na stránce Va¹e hodnocení.
<p>
Také mù¾ete zobrazovat hodnocení jiných lidí, kteøí pou¾ívají tento plugin. Udìláte to následovnì:

<code>
{communityrating_show data=$entry.properties type="IMDB" who="garvin" url="http://www.blog_kamarada.cz/index.php?/plugin/communityrating"}
</code>

Pomocí parametrù "who" a "url" mù¾ete zadat adresu blogu kamaráda. Mù¾ete pøirozenìì pøidat libovolný poèet volání funkce {communityrating_show}.

<h2>©ablony pro hodnocení</h2>
<p>
Pro zobrazení hodnocení mù¾ete pou¾ít pro ka¾dý typ hodnocené vìci (IMDB, Výrobek, ...) a pro ka¾dého kamaráda jinou ¹ablonu. Tedy ¾e ka¾dá kombinace mù¾e vypadat jinak.
<p>
Jako výchozí je pou¾ita ¹ablona, která zobrazuje hvìzdièky jako indikátor hodnocení.
<p>
©ablony jsou pojmenovaní jako "communityrating_IMDB.tpl" nebo "communityrating_IMDB_garvin.tpl". První èást oznaèuje typ vìci ("_IMDB"). Druhá èást názvu ("", "_garvin") je jméno kamaráda, od kterého zobrazujeme hodnocení. Tak¾e si mù¾ete hodnocení tak, ¾e se pro ka¾dého cizího hodnotitele bude zobrazovat odli¹nì!

<h2>RSS Kanály</h2>

<p>
Informaci o hodnocení mù¾ete také pøidat do RSS kanálu. Pou¾ijte stejnou funkci API rozhraní v ¹ablonì RSS kanálu, jmenuje se feed_*.tpl. A nezapomeòte pøipojit parametr "escaped='true'" podle následujícího pøíkladu:

<code>
{communityrating_show data=$entry.properties type="IMDB" escaped="true"}
</code>

<h2>Postup pøidání nového typu vìci</h2>
<ol>
<li>Nastavte plugin "Hlasování". Upravte políèko, které obsahuje seznam aktuálnì pou¾itých typù. Pøidejte svùj vlastní typ na konec. Oddìlovaèem je èárka ",". Zadávejte názvy bez diakritiky a speciálních znakù.</li>
<li>Zkopírujte obrázky img/stars_XXX_(full|half|zero).png tak, abyste mohli vytvoøit obrázky pro Vá¹ nový typ. Pokud pøidáte nový typ "auta", musí se obrázky jmenovat "stars_auta_full.png", "stars_auta_half.png", "stars_auta_zero.png".
</li>
<li>Vytvoøte nový soubor ¹ablony "communityrating_auta.tpl"</li> buï v adresáøi pluginu, nebo v adresáøi Va¹í aktuální ¹ablony/stylu vzhledu. Upravte ¹ablonu podle potøeby.
<li>Upravte ¹ablonu "entries.tpl". Vlo¾te do ní následující øádek:
<code>
{communityrating_show data=$entry.properties type="auta"}
</code>
</li>
</ol>

<h2>Postup pøidání nového kamaráda</h2>
<ol>
<li>Nejprve se pøesvìdète, ¾e kamarád nainstaloval plugin do svého blogu serendipity. Také se pøedpokládá, ¾e znáte URL adreu kamarádova blogu.</li>
<li>Pøidejte nové soubory ¹ablon. Øeknìme, ¾e chcete zobrazovat, jak kamarád "garvin" hodnotil filmy podle IMDB. Pak budete potøebovat vytvoøit soubor "communityrating_IMDB_garvin.tpl".
</li>
<li>Upravte ¹ablonu "entries.tpl". Vlo¾te do ní následující øádek:
<code>
{communityrating_show who="garvin" url="http://garvin/index.php?/plugin/communityrating" data=$entry.properties type="auta"}
</code>
</li>
</ol>

<h2>CHANGE_LOG (HISTORIE VERZÍ)</h2>
<ul>
<li>Nejnovìj¹í: Dopøedná kompatibilita se smarty3</li>
</ul>

</body>        
</html>
