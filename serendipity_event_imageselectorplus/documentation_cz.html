<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
    <title>Dokumentace: Avatar Plugin</title>
</head>
<body>
<h1>Dokumentace pluginy Serendipity ImageSelectorPlus</h1>

<p>Dokumentaci k tomuto pluginu pøelo¾il do èe¹tiny Vladimír Ajgl (vlada [zavinac] ajgl [tecka] cz) dne 26.6.2011. Od té doby mohl být plugin pozmìnìn nebo mohly být roz¹íøené jeho funkce. Zkontrolujte pro jistotu i <a href="documentation_en.html">anglickou dokumentaci</a> a <a href="ChangeLog">ChangeLog</a>.

<h2>Obecný popis</h2>
<p>
    Plugin ImageSelectorPlus se pou¾ívá k usnadnìní práce s obrázky, pøedev¹ím k vkládání obrázkù z mediatéky (interní galerie Serendipity).
</p> 

<h2>QuickBlog</h2>
<p>
Pøi nahrávání obrázku ho rovnou mù¾ete vystavit jako pøíspìvek. Øiïte se podle instrukcí nad formuláøem QuickBlogu na stranì s nahráváním souborù.
</p>

<h3>Zmìna vzhledu pøíspìvku QuickBlogu</h3>
<p>
    Plugin pou¾ívá ¹ablonu "plugin_quickblog.tpl". Její zmìnou zmìníte vzhled vkládaných obrázkù.
</p>

<p>Informace o obrázku jsou uchovány v poli {$quickblog}, které má tyto èásti:
    <ul>
        <li>fullimage - cesta a název velkého souboru</li>
        <li>image - cesta a název k náhledu</li>
        <li>body - tìlo pøíspìvku</li>
        <li>exif_mode - zpùsob získání exif tagù z fotky ('internal', 'jhead', 'none')</li>
        <li>exif - pole obsahující rùzné exif tagy, pro jejich názvy si najdìte dokumentaci exif tagù - jejich názvy pou¾ijte následovnì, pøíklad $quickblog.exif.COMMENT nebo $quickblog.exif.Focal_length</li>
    </ul>
</p>


<h2>Hromadné vkládání obrázkù</h2>   
     Dal¹í funkcí je hromadné vkládání obrázkù. Funguje na principu, ¾e v textu pøíspìvku napí¹ete xml strukturu, kterou plugin nahradí obrázky z databáze.
</p>

<h3>Kdy se to hodí?</h3>
<p>
    Kdy¾ pí¹ete fotoblog a potøebujete do pøíspìvku vkládat více obrázkù najednou. Kdy¾ máte padesát fotek, které jsou navíc oèíslované, tak je mù¾ete vlo¾it buï po jedné, jak to Serendipity umo¾òují v základu, nebo pomocí jediné øádky s pou¾itím popisovaného pluginu. 
</p>

<h3>Pøíklady</h3>
    <h4>Pøíklad 1 - vkládáme èásti galerie</h4>
    <code><pre>
        &lt;mediainsert&gt;
            &lt;gallery name="MyHolidays/" /&gt;
            &lt;media type="single" name="pict0034" /&gt;
            &lt;media type="single" name="pict0032" /&gt;
            &lt;media type="range" prefix="pict00" start="35" stop="52" /&gt;
        &lt;/mediainsert&gt;
    </pre></code>
    <p>
        Takto vlo¾íme z galerie "MyHolidays" obrázek "pict0034", po nìm obrázek "pict0032" a pak v¹echny obrázky od "pict0035" do "pict0052".

        <ul>
        Chování pluginu:
        <li>Zobrazuje pouze obrázky, které jsou pøítomny v databázi. Tak¾e pokud zrovna obrázky 44,45,48 a 50 v databázi nejsou, pluginu to nevadí a nespadne. Jednodu¹e tyto obrázky vynechá.</li>
        <li>Zachovává poøadí obrázkù z xml. Tedy obrázek 34 bude zobrazen pøed obrázkem 32.</li>
        </ul>
    </p>

    <h4>Pøíklad 2 - vkládáme celou galerii najednou</h4>
    <code><pre>
        &lt;mediainsert&gt;
            &lt;gallery name="MyHolidays/" /&gt;
            &lt;media type="gallery" /&gt;
        &lt;/mediainsert&gt;
    </pre></code>

<h3>Dùle¾ité</h3>
<p>Plugin je relativnì citlivý na (ne)správnost syntaxe xml. Pokud není bezchybná, typicky zapomenete na ukonèovací zpìtné lomítko v tagu media, mù¾ete vyøadit z èinnosti celý blog!!! (prostì není o¹etøená kontrola správnosti syntaxe a parser na ¹patné syntaxi havaruje)</p>

<h3>Pøehled xml tagù</h3>
<dl>
    <dt>&lt;mediainsert&gt;</dt>
    <dd>hlavní kontejner pro vkládané obrázky</dd>

    <dt>&lt;gallery&gt;</dt>
    <dd>cesta ke galerii, ze které mají být brány obrázky (reltivnì k adresáøi uploads/ - bez úvodního lomítka a s ukonèujícím lomítkem - "MyHolidays" nebo "/MyHolidays/" jsou ¹patnì. Správnì je "MyHolidays/".)</dd>

    <dt>&lt;media&gt;</dt>
    <dd>Urèuje, které obrázky mají být vlo¾eny. Na základì atributu "type" je mo¾no vlo¾it obrázky tøemi zpùsoby:

        <ul>
            <li>"single" - vlo¾í jeden obrázek se jménem zadaným atributem "name"</li>
            <li>"gallery" - bez dal¹ích atributù, vlo¾í celou galerii</li>
            <li>"range" - vlo¾í èíslované obrázky od obrázku "prefix""start" do obrázku "prefix""stop" (viz. pøíklad 1)</li>
        </ul>
    </dd>
</dl>

<h3>Zmìna vzhledu vkládaných obrázkù</h3>
<p>
    Plugin pou¾ívá ¹ablonu "plugin_mediainsert.tpl". Její zmìnou zmìníte vzhled vkládaných obrázkù.</p>

    <p>Informace o obrázku jsou uchovány v poli {$plugin_mediainsert_media}, které má tyto èásti:
    <ul>
        <li>name - jméno obrázku (název souboru bez pøípony)</li>
        <li>extension - pøípona souboru</li>
        <li>realname - celé jméno souboru, to samé jako {$name}.{$extension}</li>
        <li>thumbnail_name - název souboru s náhledem dostanete následovnì - {$name}.{$thumbnail_name}.{$extension}</li>
        <li>path - cesta ke galerii, stejná hodnota, kteoru zadáváte v tagu "gallery"</li>
        <li>comment1 - krátký komentáø z databáze</li>
        <li>width - ¹íøka pùvodního (velkého) obrázku</li>
        <li>height - vý¹ka pùvodního (velkého) obrázku</li>
        <li>thumbwidth - ¹íøka náhledu</li>
        <li>thumbheight - vý¹ka náhledu</li>
    </ul>
</p>


<h2>Rozbalování ZIP archivù</h2>

<h3>K èemu je to dobré</h3>
<p>Kupøíkladu kdy¾ chcete nahrát mnoho souborù najednou. Nemusíte vybírat jednotlivé soubory po jednom (co¾ je zdlouhavé). Prostì je zabalíte do zip archivu, nahrajete tento archiv a ten bude na blogu rozbalen.</p>

<h3>Vlastnosti rozbalování ZIPù</h3>
<p>
<ul>
<li>Soubory z archivu jsou rozbaleny do stejného adresáøe, do kterého je nahrán archiv.</li>
<li>Rozbalené soubor (co¾ nemusí být nutnì obrázky) jsou vlo¾eny do databáze médií.</li>
<li>Pokud zvolíte volbu "Zadat vlastnosti", rozbalené obrázky se také zorazí pro zadávání vlastností.</li>
<li>Nenahrávejte ZIP archivy s podadersáøi. Netestoval jsem to, ale obávám se, ¾e se tyto adresáøe nevytvoøí a v¹echny soubory se rozbalí do jednoho adresáøe.</li>
<li>Dávejte pozor na velikost ZIP archivu. Na webu máte nastavené urèité omezení týkající se maximální velikosti nahrávaného souboru (obvykle to bývá 10MB).</li>
</ul>
</p>


<h2>Automatická zmìna velikosti obrázkù</h2>

<p>Tato funkce automaticky prohledá pøíspìvek blogu a vyhledá obrázky, které jsou zadány ve formì:</p>

<pre>
&lt;img src="/uploads/mujobrazek.jpg" width="100" height="150" /&gt;
</pre>

<p>Kdy¾ najde obrázek v tomto formátu (pokud najde obrázek s definovanou vý¹kou a/nebo ¹íøkou), nahradí jeho atribut 'src' (adresa obrázku) odkazem na skript pro zmìnu velikosti obrázku 'serendipity_admin_image_selector.php'. Tedy pøepí¹e odkaz na nìco jako:</p>

<pre>
&lt;img src="http://www.mujblog.cz/serendipity_admin_image_selector.php?serendipity[image]=1&serendipity[disposition]=inline&serendipity[step]=showItem&serendipity[resizeWidth]=100&serendipity[resizeHeight]=150" width="100" height="150" /&gt;
</pre>

<p>Tato vlastnost ¹etøí vá¹ èás, pokud potøebujete pou¾ít stejný obrázek ve více rozli¹eních a mù¾e také u¹etøit èas nutný pro sta¾ení obrázkù pøi prohlí¾ení va¹eho blogu. Vliv na rychlost blogu je minimální, proto¾e se zmìna velikosti obrázku provede jenom jednou, pøi prvním pøepisu tagu &lt;img&gt;. 
</p>

<h3>Poznámky</h3>

<ol>
<li>Pomìr stran obrázku je zachován.</li>
<li>Staèí definovat pouze jeden z atributù 'width' nebo 'height'. Pokud není zadán ¾ádný z nich, obrázek je ignorován a adresa není nahrazena adresou na skript pro zmìnu velikosti obrázku.</li>
<li>Pokud jsou zadány dohromady jak ¹íøka ('width'), tak vý¹ka ('height'), obrázek bude zvìt¹en/zmen¹en pøi zachování pomìrù stran tak, aby se ve¹el do zadané oblasti.</li>
</ol>

<h2>Autoøi</h2>
<p>
Garvin Hicking, Nìmecko - v¹echno ostatní<br />
Vladimír Ajgl (vlada [at] ajgl [dot] cz), Èeská republika, 19.11.2007 - hromadné vkládání obrázkù do pøíspìvkù pomocí XML, hromadné nahrávání v ZIP souboru
</p>


<h2>Historie verzí (ChangeLog)</h2>

<ul>
<li>nejnovìj¹í verze</li>
	<ul>
	<li>Dopøedná kompatibilita se smarty3</li>
	</ul>
<li>verze 0.28</li>
	<ul>
	<li>Pøedávání promìnné $eventData do ¹ablony plugin_mediainsert.tpl, pomocí smarty tagu {$plugin_mediainsert_entry}.</li>
	</ul>
<li>verze 0.20 [Vladimír Ajgl]</li>
	<ul>
	<li>Pøidána dokumentace (documentation_en.html, documentation_cs.html)</li>
	<li>Pøidán èeský pøeklad</li>
	<li>Pøidána funkce hromadného vkládání fotek do pøíspìvkù pomocí XML kódu (pouze s PHP5)</li>
	</ul>
</ul>

</body>
</html>
